<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN" "http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd">
<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" onload="Init(evt)" onmousedown="Grab(evt)" onmousemove="Drag(evt)" onmouseup="Drop(evt)">

 <title>Drag And Drop</title>

 <desc>
  A nice little demo of drag-and-drop functionality in SVG,
  written by Doug Schepers on February 16, 2004.
  Use or misuse this code however you wish.
 </desc>

 <script><![CDATA[ 
  var SVGDocument = null;
  var SVGRoot = null;

  var TrueCoords = null;
  var GrabPoint = null;

  var BackDrop = null;
  var DragTarget = null;
  var Left;
  var Right;

  var xLeft;
  var xRight;


  function Init(evt){
   SVGDocument = evt.target.ownerDocument;
   SVGRoot = SVGDocument.documentElement;

   TrueCoords = SVGRoot.createSVGPoint();
   GrabPoint = SVGRoot.createSVGPoint();

   BackDrop = SVGDocument.getElementById('BackDrop');
   TextBox = SVGDocument.getElementById('TextBox');
   Left = SVGDocument.getElementById('LeftSlider');
   Right = SVGDocument.getElementById('RightSlider');
   TLeft = SVGDocument.getElementById('ChangeL');
   TRight = SVGDocument.getElementById('ChangeR');
  }


  function Grab(evt){
   var targetElement = evt.target;
   if ((BackDrop != targetElement) && (TextBox != targetElement) && (TRight != targetElement) && (TLeft != targetElement)){
    DragTarget = targetElement;
    DragTarget.parentNode.appendChild( DragTarget );
    DragTarget.setAttributeNS(null, 'pointer-events', 'none');
    
    var transMatrix = DragTarget.getCTM();
    GrabPoint.x = TrueCoords.x - Number(transMatrix.e);
   }
  };


  function Drag(evt){
   GetTrueCoords(evt);
   
   if (DragTarget){
    var newX = TrueCoords.x - GrabPoint.x;

    if(DragTarget == Left){
     xLeft = newX;
     ChangeWords(xLeft, 'L');
    }
    else if(DragTarget == Right){
     xRight = 2000 + newX;
     ChangeWords(xRight, 'R');
    }
    DragTarget.setAttributeNS(null, 'transform', 'translate(' + newX + ',' + 0 + ')');   
   }
  };

 
  function Drop(evt){
   if ( DragTarget ){
    var targetElement = evt.target;
    DragTarget.setAttributeNS(null, 'pointer-events', 'all');
    DragTarget = null;
   }
  };


  function GetTrueCoords(evt){
   var newScale = SVGRoot.currentScale;
   var translation = SVGRoot.currentTranslate;
   TrueCoords.x = (evt.clientX - translation.x)/newScale;
  };


  function ChangeWords(xVal, slider){
   Changeable = SVGDocument.getElementById('Change' + slider);
   newText = SVGDocument.createTextNode(xVal);
   Changeable.replaceChild(newText, Changeable.firstChild);  
  };

 ]]></script>

 <rect id="BackDrop" x="-10%" y="-10%" width="110%" height="110%" fill="none" pointer-events="all"/>

 <g id = "Left">
  <circle id = "LeftSlider" cx="25%" cy="25%" r="15" style="fill: blue;" stroke="black" stroke-width="1"/>
  <text id = "ChangeL" x = "25%" y = "35%" font-family = "sans-serif" font-weight = "bold" font-size = "12pt" text-anchor = "middle">Left Tracer</text>
 </g>

 <g id = "Right">
  <circle id="RightSlider" cx="75%" cy="25%" r="15" style="fill: red;" stroke="black" stoke-width="2"/>
  <text id = "ChangeR" x = "75%" y = "35%" font-family = "sans-serif" font-weight = "bold" font-size = "12pt" text-anchor = "middle">Right Tracer</text>
 </g> 
  
 <g style = "font-family: sans-serif; font-weight: bold; font-size: 12pt; text-anchor: middle">
  <text id = "TextBox" x = "50%" y = "60">Centre</text>
 </g>

</svg>
